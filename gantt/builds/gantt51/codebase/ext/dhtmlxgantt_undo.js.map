{"version":3,"sources":["webpack:///dhtmlxgantt_undo.js","webpack:///webpack/bootstrap bd3cee9c1f19def455d1","webpack:///./sources/ext/undo.js"],"names":["Gantt","plugin","gantt","modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","35","36","config","undo_steps","undo","redo","this","_undo","getUndoStack","_undoStack","getRedoStack","_redoStack","undo_types","link","task","undo_actions","update","remove","add","maxSteps","undo_enabled","redo_enabled","_push","stack","action","commands","length","push","shift","_pop","pop","updateConfigs","callEvent","_applyAction","invert","command","entities","entity","actions","type","methods","isExists","batchUpdate","method","check","oldValue","parent","$index","value","id","logAction","create","slice","revert","copy","inverseCommands","load","clear","assert","monitor","_batchAction","_batchMode","_ignore","startIgnore","stopIgnore","startBatchAction","timeout","clearTimeout","setTimeout","stopBatchAction","_storeCommand","_storeEntityCommand","obj","old","actionType","entityType","_storeTaskCommand","getInitialTask","_storeLinkCommand","getInitialLink","onTaskAdded","onTaskUpdated","onTaskDeleted","_nestedTasks","children","_nestedLinks","childrenLinks","onLinkAdded","onLinkUpdated","onLinkDeleted","_initialTasks","_getLinks","$source","concat","$target","setNestedTasks","taskIds","tasks","linkIds","getTask","setInitialTask","uniqueLinks","links","setInitialLink","getTaskIndex","_initialLinks","getLink","store","updTask","oldId","newId","changeTaskCommandId","updLink","oldTaskId","newTaskId","source","target","changeLinkCommandId","updateTasksIds","log","entry","j","updateLinksIds","noTrack","onBeforeUndo","onBeforeRedo","attachEvent","batchActions","nested","eachTask"],"mappings":"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","file":"dhtmlxgantt_undo.js","sourcesContent":["/*!\n * @license\r\n * \r\n * dhtmlxGantt v.5.1.0-beta1 Professional\r\n * This software is covered by DHTMLX Enterprise License. Usage without proper license is prohibited.\r\n * \r\n * (c) Dinamenta, UAB.\r\n * \n */\nGantt.plugin(function(gantt){\n/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 35);\n/******/ })\n/************************************************************************/\n/******/ ({\n\n/***/ 35:\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(36);\n\n\n/***/ }),\n\n/***/ 36:\n/***/ (function(module, exports) {\n\ngantt.config.undo_steps = 10;\r\ngantt.config.undo = true;\r\ngantt.config.redo = true;\r\n\r\ngantt.undo = function(){\r\n\tthis._undo.undo();\r\n};\r\n\r\ngantt.getUndoStack = function(){\r\n\treturn this._undo._undoStack;\r\n};\r\n\r\ngantt.getRedoStack = function(){\r\n\treturn this._undo._redoStack;\r\n};\r\n\r\ngantt.redo = function(){\r\n\tthis._undo.redo();\r\n};\r\n\r\n/**\r\n * entities that require different processing for undoing-redoing changes\r\n * @type {{link: string, task: string}}\r\n */\r\ngantt.config.undo_types = {\r\n\tlink: \"link\",\r\n\ttask: \"task\"\r\n};\r\n\r\n/**\r\n * types of traced actions\r\n * @type {{update: string, remove: string, add: string}}\r\n */\r\ngantt.config.undo_actions = {\r\n\tupdate:\"update\",\r\n\tremove:\"remove\",// remove item from datastore\r\n\tadd:\"add\"\r\n};\r\n\r\ngantt._undo = {\r\n\t_undoStack:[],\r\n\t_redoStack:[],\r\n\tmaxSteps:10,\r\n\tundo_enabled: true,\r\n\tredo_enabled: true,\r\n\t_push: function(stack, action){\r\n\t\tif(!action.commands.length)\r\n\t\t\treturn;\r\n\r\n\r\n\t\tstack.push(action);\r\n\t\twhile(stack.length > this.maxSteps){\r\n\t\t\tstack.shift();\r\n\t\t}\r\n\t\treturn action;\r\n\t},\r\n\t_pop:function(stack){\r\n\t\treturn stack.pop();\r\n\t},\r\n\r\n\tundo:function(){\r\n\t\tthis.updateConfigs();\r\n\t\tif(!this.undo_enabled)\r\n\t\t\treturn;\r\n\r\n\t\tvar action = this._pop(this._undoStack);\r\n\t\tif(gantt.callEvent(\"onBeforeUndo\", [action]) !== false){\r\n\t\t\tif(action){\r\n\r\n\t\t\t\tthis._applyAction(this.action.invert(action));\r\n\t\t\t\tthis._push(this._redoStack, action);\r\n\t\t\t}\r\n\t\t}\r\n\t\tgantt.callEvent(\"onAfterUndo\", []);\r\n\t},\r\n\r\n\tredo:function(){\r\n\t\tthis.updateConfigs();\r\n\t\tif(!this.redo_enabled)\r\n\t\t\treturn;\r\n\r\n\t\tvar action = this._pop(this._redoStack);\r\n\t\t\tif(gantt.callEvent(\"onBeforeRedo\", [action]) !== false){\r\n\t\t\t\tif(action){\r\n\t\t\t\t\tthis._applyAction(action);\r\n\t\t\t\t\tthis._push(this._undoStack, action);\r\n\t\t\t\t}\r\n\t\t}\r\n\t\tgantt.callEvent(\"onAfterRedo\", []);\r\n\t},\r\n\r\n\t_applyAction:function(action){\r\n\t\tvar command = null,\r\n\t\t\tentities = this.command.entity,\r\n\t\t\tactions = this.command.type;\r\n\r\n\t\tvar methods = {};\r\n\t\tmethods[entities.task] = {\r\n\t\t\tadd: \"addTask\",\r\n\t\t\tupdate: \"updateTask\",\r\n\t\t\tremove: \"deleteTask\",\r\n\t\t\tisExists: \"isTaskExists\"\r\n\t\t};\r\n\t\tmethods[entities.link] = {\r\n\t\t\tadd: \"addLink\",\r\n\t\t\tupdate: \"updateLink\",\r\n\t\t\tremove: \"deleteLink\",\r\n\t\t\tisExists: \"isLinkExists\"\r\n\t\t};\r\n\r\n\t\tgantt.batchUpdate(function(){\r\n\t\t\tfor(var i = 0; i < action.commands.length; i++){\r\n\t\t\t\tcommand = action.commands[i];\r\n\t\t\t\tvar method = methods[command.entity][command.type],\r\n\t\t\t\t\tcheck = methods[command.entity][\"isExists\"];\r\n\r\n\t\t\t\tif(command.type == actions.add){\r\n\t\t\t\t\tgantt[method](command.oldValue, command.oldValue.parent, command.oldValue.$index);\r\n\t\t\t\t}else if(command.type == actions.remove){\r\n\t\t\t\t\tif(gantt[check](command.value.id))\r\n\t\t\t\t\t\tgantt[method](command.value.id);\r\n\t\t\t\t}else if(command.type == actions.update){\r\n\r\n\t\t\t\t\tgantt[method](command.value.id, command.value);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\r\n\t//storeUndo:\r\n\tlogAction: function(action){\r\n\t\tthis._push(this._undoStack, action);\r\n\t\tthis._redoStack = [];\r\n\t},\r\n\r\n\taction: {\r\n\t\tcreate: function(commands){\r\n\t\t\treturn {commands: commands ? commands.slice() : []};\r\n\t\t},\r\n\t\tinvert: function(action){\r\n\t\t\tvar revert = gantt.copy(action);\r\n\t\t\tvar commands = gantt._undo.command;\r\n\r\n\t\t\tfor(var i = 0; i < action.commands.length; i++){\r\n\t\t\t\tvar command = revert.commands[i] = commands.invert(revert.commands[i]);\r\n\t\t\t\tif(command.type == commands.type.update){\r\n\t\t\t\t\tvar value = command.value;\r\n\t\t\t\t\tcommand.value = command.oldValue;\r\n\t\t\t\t\tcommand.oldValue = value;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn revert;\r\n\t\t}\r\n\t},\r\n\r\n\tcommand:{\r\n\t\tcreate: function(value, oldValue, type, entity){\r\n\t\t\treturn {\r\n\t\t\t\tentity:entity,\r\n\t\t\t\ttype:type,\r\n\t\t\t\tvalue:gantt.copy(value),\r\n\t\t\t\toldValue:gantt.copy(oldValue || value)\r\n\t\t\t};\r\n\t\t},\r\n\t\tinvert: function(command){\r\n\t\t\tvar revert = gantt.copy(command);\r\n\t\t\trevert.type = this.inverseCommands(command.type);\r\n\t\t\treturn revert;\r\n\t\t},\r\n\t\t// entities that require different processing for undoing-redoing changes\r\n\t\tentity:null,\r\n\r\n\t\t//types of traced actions\r\n\t\ttype:null,\r\n\t\tinverseCommands:function(command){\r\n\t\t\tswitch (command){\r\n\t\t\t\tcase this.type.update:\r\n\t\t\t\t\treturn this.type.update;\r\n\t\t\t\tcase this.type.remove:\r\n\t\t\t\t\treturn this.type.add;\r\n\t\t\t\tcase this.type.add:\r\n\t\t\t\t\treturn this.type.remove;\r\n\t\t\t\tcase this.type.load:\r\n\t\t\t\t\treturn this.type.clear;\r\n\t\t\t\tcase this.type.clear:\r\n\t\t\t\t\treturn this.type.load;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tgantt.assert(false, \"Invalid command \"+ command);\r\n\t\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tmonitor: {\r\n\t\t_batchAction: null,\r\n\t\t_batchMode: false,\r\n\t\t_ignore: false,\r\n\t\tstartIgnore: function(){\r\n\t\t\tthis._ignore = true;\r\n\t\t},\r\n\t\tstopIgnore: function(){\r\n\t\t\tthis._ignore = false;\r\n\t\t},\r\n\t\tstartBatchAction : function(){\r\n\t\t\t// try catching updates made from event handlers using timeout\r\n\t\t\tif(this.timeout){\r\n\t\t\t\tclearTimeout(this.timeout);\r\n\t\t\t}\r\n\t\t\tthis.timeout = setTimeout(function(){\r\n\t\t\t\tgantt._undo.monitor.stopBatchAction();\r\n\t\t\t}, 10);\r\n\r\n\r\n\t\t\tif(this._ignore || this._batchMode)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tthis._batchMode = true;\r\n\t\t\tthis._batchAction = gantt._undo.action.create();\r\n\t\t},\r\n\t\tstopBatchAction: function(){\r\n\t\t\tif(this._ignore)\r\n\t\t\t\treturn;\r\n\t\t\tvar undo = gantt._undo;\r\n\t\t\tif(this._batchAction){\r\n\t\t\t\tundo.logAction(this._batchAction);\r\n\t\t\t}\r\n\t\t\tthis._batchMode = false;\r\n\t\t\tthis._batchAction = null;\r\n\t\t},\r\n\r\n\t\t_storeCommand: function(command){\r\n\t\t\tvar undo = gantt._undo;\r\n\t\t\tundo.updateConfigs();\r\n\r\n\t\t\tif(!undo.undo_enabled)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tif(this._batchMode){\r\n\t\t\t\tthis._batchAction.commands.push(command);\r\n\t\t\t}else{\r\n\t\t\t\tvar action = undo.action.create([command]);\r\n\t\t\t\tundo.logAction(action);\r\n\t\t\t}\r\n\t\t},\r\n\t\t_storeEntityCommand: function(obj, old, actionType, entityType){\r\n\t\t\tvar undo = gantt._undo;\r\n\t\t\tvar command = undo.command.create(obj, old, actionType, entityType);\r\n\t\t\tthis._storeCommand(command);\r\n\t\t},\r\n\t\t_storeTaskCommand: function(obj, type){\r\n\t\t\tthis._storeEntityCommand(obj, this.getInitialTask(obj.id), type, gantt._undo.command.entity.task);\r\n\t\t},\r\n\t\t_storeLinkCommand: function(obj, type){\r\n\t\t\tthis._storeEntityCommand(obj, this.getInitialLink(obj.id), type, gantt._undo.command.entity.link);\r\n\t\t},\r\n\r\n\r\n\t\tonTaskAdded:function(task){\r\n\t\t\tif(!this._ignore)\r\n\t\t\t\tthis._storeTaskCommand(task, gantt._undo.command.type.add);\r\n\t\t},\r\n\t\tonTaskUpdated:function(task){\r\n\t\t\tif(!this._ignore)\r\n\t\t\t\tthis._storeTaskCommand(task, gantt._undo.command.type.update);\r\n\t\t},\r\n\t\tonTaskDeleted: function(task){\r\n\t\t\tif(!this._ignore){\r\n\t\t\t\tthis._storeTaskCommand(task, gantt._undo.command.type.remove);\r\n\t\t\t\tif(this._nestedTasks[task.id]){\r\n\t\t\t\t\tvar children = this._nestedTasks[task.id];\r\n\t\t\t\t\tfor(var i = 0; i < children.length; i++){\r\n\t\t\t\t\t\tthis._storeTaskCommand(children[i], gantt._undo.command.type.remove);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif(this._nestedLinks[task.id]){\r\n\t\t\t\t\tvar childrenLinks = this._nestedLinks[task.id];\r\n\t\t\t\t\tfor(var i = 0; i < childrenLinks.length; i++){\r\n\t\t\t\t\t\tthis._storeLinkCommand(childrenLinks[i], gantt._undo.command.type.remove);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tonLinkAdded: function(link){\r\n\t\t\tif(!this._ignore)\r\n\t\t\t\tthis._storeLinkCommand(link, gantt._undo.command.type.add);\r\n\t\t},\r\n\t\tonLinkUpdated: function(link){\r\n\t\t\tif(!this._ignore)\r\n\t\t\t\tthis._storeLinkCommand(link, gantt._undo.command.type.update);\r\n\t\t},\r\n\t\tonLinkDeleted: function(link){\r\n\t\t\tif(!this._ignore)\r\n\t\t\t\tthis._storeLinkCommand(link, gantt._undo.command.type.remove);\r\n\t\t},\r\n\t\t_initialTasks:{},\r\n\t\t_nestedTasks:{},\r\n\t\t_nestedLinks:{},\r\n\t\t_getLinks: function(task){\r\n\t\t\treturn task.$source.concat(task.$target);\r\n\t\t},\r\n\t\tsetNestedTasks: function(id, taskIds){\r\n\t\t\tvar task = null,\r\n\t\t\t\ttasks = [],\r\n\t\t\t\tlinkIds = this._getLinks(gantt.getTask(id));\r\n\r\n\t\t\tfor(var i = 0; i < taskIds.length; i++){\r\n\t\t\t\ttask = this.setInitialTask(taskIds[i]);\r\n\r\n\t\t\t\tlinkIds = linkIds.concat(this._getLinks(task));\r\n\r\n\r\n\t\t\t\ttasks.push(task);\r\n\t\t\t}\r\n\r\n\t\t\tvar uniqueLinks = {};\r\n\t\t\tfor(var i = 0; i < linkIds.length; i++){\r\n\t\t\t\tuniqueLinks[linkIds[i]] = true;\r\n\t\t\t}\r\n\t\t\tvar links = [];\r\n\t\t\tfor(var i in uniqueLinks){\r\n\t\t\t\tlinks.push(this.setInitialLink(i));\r\n\t\t\t}\r\n\t\t\tthis._nestedTasks[id] = tasks;\r\n\t\t\tthis._nestedLinks[id] = links;\r\n\t\t},\r\n\t\tsetInitialTask: function(id){\r\n\t\t\tif(!this._initialTasks[id] || !this._batchMode){\r\n\t\t\t\tvar task = gantt.copy( gantt.getTask(id));\r\n\t\t\t\ttask.$index = gantt.getTaskIndex(id);\r\n\r\n\t\t\t\tthis._initialTasks[id] = task;\r\n\t\t\t}\r\n\t\t\treturn this._initialTasks[id];\r\n\t\t},\r\n\t\tgetInitialTask: function(id){\r\n\t\t\treturn this._initialTasks[id];\r\n\t\t},\r\n\r\n\t\t_initialLinks:{},\r\n\t\tsetInitialLink: function(id){\r\n\t\t\tif(!this._initialLinks[id] || !this._batchMode)\r\n\t\t\t\tthis._initialLinks[id] = gantt.copy(gantt.getLink(id));\r\n\r\n\t\t\treturn this._initialLinks[id];\r\n\t\t},\r\n\t\tgetInitialLink: function(id){\r\n\t\t\treturn this._initialLinks[id];\r\n\t\t}\r\n\t}\r\n\r\n\r\n};\r\ngantt._undo.updateConfigs = function(){\r\n\tgantt._undo.maxSteps = gantt.config.undo_steps;\r\n\tgantt._undo.command.entity = gantt.config.undo_types;\r\n\tgantt._undo.command.type = gantt.config.undo_actions;\r\n\tgantt._undo.undo_enabled = !!gantt.config.undo;\r\n\tgantt._undo.redo_enabled = (!!gantt.config.undo) && (!!gantt.config.redo);\r\n};\r\n\r\n\r\n(function(){\r\n\r\n\tvar monitor = gantt._undo.monitor;\r\n\r\n\tvar noTrack = {\r\n\t\t\"onBeforeUndo\":\"onAfterUndo\",\r\n\t\t\"onBeforeRedo\": \"onAfterRedo\"\r\n\t};\r\n\tfor(var i in noTrack){\r\n\t\tgantt.attachEvent(i, function(){\r\n\t\t\tmonitor.startIgnore();\r\n\t\t});\r\n\t\tgantt.attachEvent(noTrack[i], function(){\r\n\t\t\tmonitor.stopIgnore();\r\n\t\t});\r\n\t}\r\n\r\n\tvar batchActions = [\r\n\t\t\"onTaskDragStart\",\r\n\t\t\"onAfterTaskDelete\",\r\n\t\t\"onBeforeBatchUpdate\"\r\n\t];\r\n\r\n\tfor(var i  = 0; i < batchActions.length; i++){\r\n\t\tgantt.attachEvent(batchActions[i], function(){\r\n\t\t\tmonitor.startBatchAction();\r\n\t\t});\r\n\t}\r\n\tfunction store(id){\r\n\t\tmonitor.setInitialTask(id);\r\n\t\treturn true;\r\n\t}\r\n\r\n\r\n\r\n\tgantt.attachEvent(\"onBeforeTaskDrag\", store);\r\n\tgantt.attachEvent(\"onLightbox\", store);\r\n\tgantt.attachEvent(\"onBeforeTaskAutoSchedule\", function(task){ store(task.id);  return true;});\r\n\tgantt.attachEvent(\"onBeforeTaskDelete\", function(id){\r\n\t\tstore(id);\r\n\t\tvar nested = [];\r\n\t\tgantt.eachTask(function(task){\r\n\t\t\tnested.push(task.id);\r\n\t\t}, id);\r\n\t\tmonitor.setNestedTasks(id, nested);\r\n\t\treturn true;\r\n\t});\r\n\r\n\tgantt.attachEvent(\"onAfterTaskAdd\", function(id, task){\r\n\t\tmonitor.onTaskAdded(task);\r\n\t});\r\n\tgantt.attachEvent(\"onAfterTaskUpdate\", function(id, task){\r\n\t\tmonitor.onTaskUpdated(task);\r\n\t});\r\n\tgantt.attachEvent(\"onAfterTaskDelete\", function(id, task){\r\n\t\tmonitor.onTaskDeleted(task);\r\n\t});\r\n\r\n\tgantt.attachEvent(\"onAfterLinkAdd\", function(id, task){\r\n\t\tmonitor.onLinkAdded(task);\r\n\t});\r\n\tgantt.attachEvent(\"onAfterLinkUpdate\", function(id, task){\r\n\t\tmonitor.onLinkUpdated(task);\r\n\t});\r\n\tgantt.attachEvent(\"onAfterLinkDelete\", function(id, task){\r\n\t\tmonitor.onLinkDeleted(task);\r\n\t});\r\n\r\n\tfunction updTask(task, oldId, newId){\r\n\t\tif(!task) return;\r\n\r\n\t\tif(task.id == oldId){\r\n\t\t\ttask.id = newId;\r\n\t\t}\r\n\r\n\t\tif(task.parent == oldId){\r\n\t\t\ttask.parent = newId;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction changeTaskCommandId(command, oldId, newId){\r\n\t\tupdTask(command.value, oldId, newId);\r\n\t\tupdTask(command.oldValue, oldId, newId);\r\n\t}\r\n\r\n\tfunction updLink(link, oldTaskId, newTaskId){\r\n\t\tif(!link) return;\r\n\t\tif(link.source == oldTaskId){\r\n\t\t\tlink.source = newTaskId;\r\n\t\t}\r\n\t\tif(link.target == oldTaskId){\r\n\t\t\tlink.target = newTaskId;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction changeLinkCommandId(command, oldId, newId){\r\n\t\tupdLink(command.value, oldId, newId);\r\n\t\tupdLink(command.oldValue, oldId, newId);\r\n\t}\r\n\r\n\tfunction updateTasksIds(log, oldId, newId) {\r\n\t\tvar undo = gantt._undo;\r\n\r\n\t\tfor (var i = 0; i < log.length; i++) {\r\n\t\t\tvar entry = log[i];\r\n\t\t\tfor (var j = 0; j < entry.commands.length; j++) {\r\n\t\t\t\tif (entry.commands[j].entity == undo.command.entity.task) {\r\n\t\t\t\t\tchangeTaskCommandId(entry.commands[j], oldId, newId);\r\n\t\t\t\t} else if (entry.commands[j].entity == undo.command.entity.link) {\r\n\t\t\t\t\tchangeLinkCommandId(entry.commands[j], oldId, newId);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction updateLinksIds(log, oldId, newId){\r\n\t\tvar undo = gantt._undo;\r\n\r\n\t\tfor (var i = 0; i < log.length; i++) {\r\n\t\t\tvar entry = log[i];\r\n\t\t\tfor (var j = 0; j < entry.commands.length; j++) {\r\n\t\t\t\tvar command = entry.commands[j];\r\n\t\t\t\tif (command.entity == undo.command.entity.link) {\r\n\t\t\t\t\tif(command.value && command.value.id == oldId){\r\n\t\t\t\t\t\tcommand.value.id = newId;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(command.oldValue && command.oldValue.id == oldId){\r\n\t\t\t\t\t\tcommand.oldValue.id = newId;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tgantt.attachEvent(\"onTaskIdChange\", function(oldId, newId){\r\n\t\tvar undo = gantt._undo;\r\n\t\tupdateTasksIds(undo._undoStack,oldId, newId);\r\n\t\tupdateTasksIds(undo._redoStack,oldId, newId);\r\n\t});\r\n\tgantt.attachEvent(\"onLinkIdChange\", function(oldId, newId){\r\n\t\tvar undo = gantt._undo;\r\n\t\tupdateLinksIds(undo._undoStack,oldId, newId);\r\n\t\tupdateLinksIds(undo._redoStack,oldId, newId);\r\n\t});\r\n\tgantt.attachEvent(\"onGanttReady\", function(){\r\n\t\tgantt._undo.updateConfigs();\r\n\t});\r\n})();\r\n\n\n/***/ })\n\n/******/ });\n});\n\n\n// WEBPACK FOOTER //\n// dhtmlxgantt_undo.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 35);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap bd3cee9c1f19def455d1","gantt.config.undo_steps = 10;\r\ngantt.config.undo = true;\r\ngantt.config.redo = true;\r\n\r\ngantt.undo = function(){\r\n\tthis._undo.undo();\r\n};\r\n\r\ngantt.getUndoStack = function(){\r\n\treturn this._undo._undoStack;\r\n};\r\n\r\ngantt.getRedoStack = function(){\r\n\treturn this._undo._redoStack;\r\n};\r\n\r\ngantt.redo = function(){\r\n\tthis._undo.redo();\r\n};\r\n\r\n/**\r\n * entities that require different processing for undoing-redoing changes\r\n * @type {{link: string, task: string}}\r\n */\r\ngantt.config.undo_types = {\r\n\tlink: \"link\",\r\n\ttask: \"task\"\r\n};\r\n\r\n/**\r\n * types of traced actions\r\n * @type {{update: string, remove: string, add: string}}\r\n */\r\ngantt.config.undo_actions = {\r\n\tupdate:\"update\",\r\n\tremove:\"remove\",// remove item from datastore\r\n\tadd:\"add\"\r\n};\r\n\r\ngantt._undo = {\r\n\t_undoStack:[],\r\n\t_redoStack:[],\r\n\tmaxSteps:10,\r\n\tundo_enabled: true,\r\n\tredo_enabled: true,\r\n\t_push: function(stack, action){\r\n\t\tif(!action.commands.length)\r\n\t\t\treturn;\r\n\r\n\r\n\t\tstack.push(action);\r\n\t\twhile(stack.length > this.maxSteps){\r\n\t\t\tstack.shift();\r\n\t\t}\r\n\t\treturn action;\r\n\t},\r\n\t_pop:function(stack){\r\n\t\treturn stack.pop();\r\n\t},\r\n\r\n\tundo:function(){\r\n\t\tthis.updateConfigs();\r\n\t\tif(!this.undo_enabled)\r\n\t\t\treturn;\r\n\r\n\t\tvar action = this._pop(this._undoStack);\r\n\t\tif(gantt.callEvent(\"onBeforeUndo\", [action]) !== false){\r\n\t\t\tif(action){\r\n\r\n\t\t\t\tthis._applyAction(this.action.invert(action));\r\n\t\t\t\tthis._push(this._redoStack, action);\r\n\t\t\t}\r\n\t\t}\r\n\t\tgantt.callEvent(\"onAfterUndo\", []);\r\n\t},\r\n\r\n\tredo:function(){\r\n\t\tthis.updateConfigs();\r\n\t\tif(!this.redo_enabled)\r\n\t\t\treturn;\r\n\r\n\t\tvar action = this._pop(this._redoStack);\r\n\t\t\tif(gantt.callEvent(\"onBeforeRedo\", [action]) !== false){\r\n\t\t\t\tif(action){\r\n\t\t\t\t\tthis._applyAction(action);\r\n\t\t\t\t\tthis._push(this._undoStack, action);\r\n\t\t\t\t}\r\n\t\t}\r\n\t\tgantt.callEvent(\"onAfterRedo\", []);\r\n\t},\r\n\r\n\t_applyAction:function(action){\r\n\t\tvar command = null,\r\n\t\t\tentities = this.command.entity,\r\n\t\t\tactions = this.command.type;\r\n\r\n\t\tvar methods = {};\r\n\t\tmethods[entities.task] = {\r\n\t\t\tadd: \"addTask\",\r\n\t\t\tupdate: \"updateTask\",\r\n\t\t\tremove: \"deleteTask\",\r\n\t\t\tisExists: \"isTaskExists\"\r\n\t\t};\r\n\t\tmethods[entities.link] = {\r\n\t\t\tadd: \"addLink\",\r\n\t\t\tupdate: \"updateLink\",\r\n\t\t\tremove: \"deleteLink\",\r\n\t\t\tisExists: \"isLinkExists\"\r\n\t\t};\r\n\r\n\t\tgantt.batchUpdate(function(){\r\n\t\t\tfor(var i = 0; i < action.commands.length; i++){\r\n\t\t\t\tcommand = action.commands[i];\r\n\t\t\t\tvar method = methods[command.entity][command.type],\r\n\t\t\t\t\tcheck = methods[command.entity][\"isExists\"];\r\n\r\n\t\t\t\tif(command.type == actions.add){\r\n\t\t\t\t\tgantt[method](command.oldValue, command.oldValue.parent, command.oldValue.$index);\r\n\t\t\t\t}else if(command.type == actions.remove){\r\n\t\t\t\t\tif(gantt[check](command.value.id))\r\n\t\t\t\t\t\tgantt[method](command.value.id);\r\n\t\t\t\t}else if(command.type == actions.update){\r\n\r\n\t\t\t\t\tgantt[method](command.value.id, command.value);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t},\r\n\r\n\t//storeUndo:\r\n\tlogAction: function(action){\r\n\t\tthis._push(this._undoStack, action);\r\n\t\tthis._redoStack = [];\r\n\t},\r\n\r\n\taction: {\r\n\t\tcreate: function(commands){\r\n\t\t\treturn {commands: commands ? commands.slice() : []};\r\n\t\t},\r\n\t\tinvert: function(action){\r\n\t\t\tvar revert = gantt.copy(action);\r\n\t\t\tvar commands = gantt._undo.command;\r\n\r\n\t\t\tfor(var i = 0; i < action.commands.length; i++){\r\n\t\t\t\tvar command = revert.commands[i] = commands.invert(revert.commands[i]);\r\n\t\t\t\tif(command.type == commands.type.update){\r\n\t\t\t\t\tvar value = command.value;\r\n\t\t\t\t\tcommand.value = command.oldValue;\r\n\t\t\t\t\tcommand.oldValue = value;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn revert;\r\n\t\t}\r\n\t},\r\n\r\n\tcommand:{\r\n\t\tcreate: function(value, oldValue, type, entity){\r\n\t\t\treturn {\r\n\t\t\t\tentity:entity,\r\n\t\t\t\ttype:type,\r\n\t\t\t\tvalue:gantt.copy(value),\r\n\t\t\t\toldValue:gantt.copy(oldValue || value)\r\n\t\t\t};\r\n\t\t},\r\n\t\tinvert: function(command){\r\n\t\t\tvar revert = gantt.copy(command);\r\n\t\t\trevert.type = this.inverseCommands(command.type);\r\n\t\t\treturn revert;\r\n\t\t},\r\n\t\t// entities that require different processing for undoing-redoing changes\r\n\t\tentity:null,\r\n\r\n\t\t//types of traced actions\r\n\t\ttype:null,\r\n\t\tinverseCommands:function(command){\r\n\t\t\tswitch (command){\r\n\t\t\t\tcase this.type.update:\r\n\t\t\t\t\treturn this.type.update;\r\n\t\t\t\tcase this.type.remove:\r\n\t\t\t\t\treturn this.type.add;\r\n\t\t\t\tcase this.type.add:\r\n\t\t\t\t\treturn this.type.remove;\r\n\t\t\t\tcase this.type.load:\r\n\t\t\t\t\treturn this.type.clear;\r\n\t\t\t\tcase this.type.clear:\r\n\t\t\t\t\treturn this.type.load;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tgantt.assert(false, \"Invalid command \"+ command);\r\n\t\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\r\n\tmonitor: {\r\n\t\t_batchAction: null,\r\n\t\t_batchMode: false,\r\n\t\t_ignore: false,\r\n\t\tstartIgnore: function(){\r\n\t\t\tthis._ignore = true;\r\n\t\t},\r\n\t\tstopIgnore: function(){\r\n\t\t\tthis._ignore = false;\r\n\t\t},\r\n\t\tstartBatchAction : function(){\r\n\t\t\t// try catching updates made from event handlers using timeout\r\n\t\t\tif(this.timeout){\r\n\t\t\t\tclearTimeout(this.timeout);\r\n\t\t\t}\r\n\t\t\tthis.timeout = setTimeout(function(){\r\n\t\t\t\tgantt._undo.monitor.stopBatchAction();\r\n\t\t\t}, 10);\r\n\r\n\r\n\t\t\tif(this._ignore || this._batchMode)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tthis._batchMode = true;\r\n\t\t\tthis._batchAction = gantt._undo.action.create();\r\n\t\t},\r\n\t\tstopBatchAction: function(){\r\n\t\t\tif(this._ignore)\r\n\t\t\t\treturn;\r\n\t\t\tvar undo = gantt._undo;\r\n\t\t\tif(this._batchAction){\r\n\t\t\t\tundo.logAction(this._batchAction);\r\n\t\t\t}\r\n\t\t\tthis._batchMode = false;\r\n\t\t\tthis._batchAction = null;\r\n\t\t},\r\n\r\n\t\t_storeCommand: function(command){\r\n\t\t\tvar undo = gantt._undo;\r\n\t\t\tundo.updateConfigs();\r\n\r\n\t\t\tif(!undo.undo_enabled)\r\n\t\t\t\treturn;\r\n\r\n\t\t\tif(this._batchMode){\r\n\t\t\t\tthis._batchAction.commands.push(command);\r\n\t\t\t}else{\r\n\t\t\t\tvar action = undo.action.create([command]);\r\n\t\t\t\tundo.logAction(action);\r\n\t\t\t}\r\n\t\t},\r\n\t\t_storeEntityCommand: function(obj, old, actionType, entityType){\r\n\t\t\tvar undo = gantt._undo;\r\n\t\t\tvar command = undo.command.create(obj, old, actionType, entityType);\r\n\t\t\tthis._storeCommand(command);\r\n\t\t},\r\n\t\t_storeTaskCommand: function(obj, type){\r\n\t\t\tthis._storeEntityCommand(obj, this.getInitialTask(obj.id), type, gantt._undo.command.entity.task);\r\n\t\t},\r\n\t\t_storeLinkCommand: function(obj, type){\r\n\t\t\tthis._storeEntityCommand(obj, this.getInitialLink(obj.id), type, gantt._undo.command.entity.link);\r\n\t\t},\r\n\r\n\r\n\t\tonTaskAdded:function(task){\r\n\t\t\tif(!this._ignore)\r\n\t\t\t\tthis._storeTaskCommand(task, gantt._undo.command.type.add);\r\n\t\t},\r\n\t\tonTaskUpdated:function(task){\r\n\t\t\tif(!this._ignore)\r\n\t\t\t\tthis._storeTaskCommand(task, gantt._undo.command.type.update);\r\n\t\t},\r\n\t\tonTaskDeleted: function(task){\r\n\t\t\tif(!this._ignore){\r\n\t\t\t\tthis._storeTaskCommand(task, gantt._undo.command.type.remove);\r\n\t\t\t\tif(this._nestedTasks[task.id]){\r\n\t\t\t\t\tvar children = this._nestedTasks[task.id];\r\n\t\t\t\t\tfor(var i = 0; i < children.length; i++){\r\n\t\t\t\t\t\tthis._storeTaskCommand(children[i], gantt._undo.command.type.remove);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif(this._nestedLinks[task.id]){\r\n\t\t\t\t\tvar childrenLinks = this._nestedLinks[task.id];\r\n\t\t\t\t\tfor(var i = 0; i < childrenLinks.length; i++){\r\n\t\t\t\t\t\tthis._storeLinkCommand(childrenLinks[i], gantt._undo.command.type.remove);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tonLinkAdded: function(link){\r\n\t\t\tif(!this._ignore)\r\n\t\t\t\tthis._storeLinkCommand(link, gantt._undo.command.type.add);\r\n\t\t},\r\n\t\tonLinkUpdated: function(link){\r\n\t\t\tif(!this._ignore)\r\n\t\t\t\tthis._storeLinkCommand(link, gantt._undo.command.type.update);\r\n\t\t},\r\n\t\tonLinkDeleted: function(link){\r\n\t\t\tif(!this._ignore)\r\n\t\t\t\tthis._storeLinkCommand(link, gantt._undo.command.type.remove);\r\n\t\t},\r\n\t\t_initialTasks:{},\r\n\t\t_nestedTasks:{},\r\n\t\t_nestedLinks:{},\r\n\t\t_getLinks: function(task){\r\n\t\t\treturn task.$source.concat(task.$target);\r\n\t\t},\r\n\t\tsetNestedTasks: function(id, taskIds){\r\n\t\t\tvar task = null,\r\n\t\t\t\ttasks = [],\r\n\t\t\t\tlinkIds = this._getLinks(gantt.getTask(id));\r\n\r\n\t\t\tfor(var i = 0; i < taskIds.length; i++){\r\n\t\t\t\ttask = this.setInitialTask(taskIds[i]);\r\n\r\n\t\t\t\tlinkIds = linkIds.concat(this._getLinks(task));\r\n\r\n\r\n\t\t\t\ttasks.push(task);\r\n\t\t\t}\r\n\r\n\t\t\tvar uniqueLinks = {};\r\n\t\t\tfor(var i = 0; i < linkIds.length; i++){\r\n\t\t\t\tuniqueLinks[linkIds[i]] = true;\r\n\t\t\t}\r\n\t\t\tvar links = [];\r\n\t\t\tfor(var i in uniqueLinks){\r\n\t\t\t\tlinks.push(this.setInitialLink(i));\r\n\t\t\t}\r\n\t\t\tthis._nestedTasks[id] = tasks;\r\n\t\t\tthis._nestedLinks[id] = links;\r\n\t\t},\r\n\t\tsetInitialTask: function(id){\r\n\t\t\tif(!this._initialTasks[id] || !this._batchMode){\r\n\t\t\t\tvar task = gantt.copy( gantt.getTask(id));\r\n\t\t\t\ttask.$index = gantt.getTaskIndex(id);\r\n\r\n\t\t\t\tthis._initialTasks[id] = task;\r\n\t\t\t}\r\n\t\t\treturn this._initialTasks[id];\r\n\t\t},\r\n\t\tgetInitialTask: function(id){\r\n\t\t\treturn this._initialTasks[id];\r\n\t\t},\r\n\r\n\t\t_initialLinks:{},\r\n\t\tsetInitialLink: function(id){\r\n\t\t\tif(!this._initialLinks[id] || !this._batchMode)\r\n\t\t\t\tthis._initialLinks[id] = gantt.copy(gantt.getLink(id));\r\n\r\n\t\t\treturn this._initialLinks[id];\r\n\t\t},\r\n\t\tgetInitialLink: function(id){\r\n\t\t\treturn this._initialLinks[id];\r\n\t\t}\r\n\t}\r\n\r\n\r\n};\r\ngantt._undo.updateConfigs = function(){\r\n\tgantt._undo.maxSteps = gantt.config.undo_steps;\r\n\tgantt._undo.command.entity = gantt.config.undo_types;\r\n\tgantt._undo.command.type = gantt.config.undo_actions;\r\n\tgantt._undo.undo_enabled = !!gantt.config.undo;\r\n\tgantt._undo.redo_enabled = (!!gantt.config.undo) && (!!gantt.config.redo);\r\n};\r\n\r\n\r\n(function(){\r\n\r\n\tvar monitor = gantt._undo.monitor;\r\n\r\n\tvar noTrack = {\r\n\t\t\"onBeforeUndo\":\"onAfterUndo\",\r\n\t\t\"onBeforeRedo\": \"onAfterRedo\"\r\n\t};\r\n\tfor(var i in noTrack){\r\n\t\tgantt.attachEvent(i, function(){\r\n\t\t\tmonitor.startIgnore();\r\n\t\t});\r\n\t\tgantt.attachEvent(noTrack[i], function(){\r\n\t\t\tmonitor.stopIgnore();\r\n\t\t});\r\n\t}\r\n\r\n\tvar batchActions = [\r\n\t\t\"onTaskDragStart\",\r\n\t\t\"onAfterTaskDelete\",\r\n\t\t\"onBeforeBatchUpdate\"\r\n\t];\r\n\r\n\tfor(var i  = 0; i < batchActions.length; i++){\r\n\t\tgantt.attachEvent(batchActions[i], function(){\r\n\t\t\tmonitor.startBatchAction();\r\n\t\t});\r\n\t}\r\n\tfunction store(id){\r\n\t\tmonitor.setInitialTask(id);\r\n\t\treturn true;\r\n\t}\r\n\r\n\r\n\r\n\tgantt.attachEvent(\"onBeforeTaskDrag\", store);\r\n\tgantt.attachEvent(\"onLightbox\", store);\r\n\tgantt.attachEvent(\"onBeforeTaskAutoSchedule\", function(task){ store(task.id);  return true;});\r\n\tgantt.attachEvent(\"onBeforeTaskDelete\", function(id){\r\n\t\tstore(id);\r\n\t\tvar nested = [];\r\n\t\tgantt.eachTask(function(task){\r\n\t\t\tnested.push(task.id);\r\n\t\t}, id);\r\n\t\tmonitor.setNestedTasks(id, nested);\r\n\t\treturn true;\r\n\t});\r\n\r\n\tgantt.attachEvent(\"onAfterTaskAdd\", function(id, task){\r\n\t\tmonitor.onTaskAdded(task);\r\n\t});\r\n\tgantt.attachEvent(\"onAfterTaskUpdate\", function(id, task){\r\n\t\tmonitor.onTaskUpdated(task);\r\n\t});\r\n\tgantt.attachEvent(\"onAfterTaskDelete\", function(id, task){\r\n\t\tmonitor.onTaskDeleted(task);\r\n\t});\r\n\r\n\tgantt.attachEvent(\"onAfterLinkAdd\", function(id, task){\r\n\t\tmonitor.onLinkAdded(task);\r\n\t});\r\n\tgantt.attachEvent(\"onAfterLinkUpdate\", function(id, task){\r\n\t\tmonitor.onLinkUpdated(task);\r\n\t});\r\n\tgantt.attachEvent(\"onAfterLinkDelete\", function(id, task){\r\n\t\tmonitor.onLinkDeleted(task);\r\n\t});\r\n\r\n\tfunction updTask(task, oldId, newId){\r\n\t\tif(!task) return;\r\n\r\n\t\tif(task.id == oldId){\r\n\t\t\ttask.id = newId;\r\n\t\t}\r\n\r\n\t\tif(task.parent == oldId){\r\n\t\t\ttask.parent = newId;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction changeTaskCommandId(command, oldId, newId){\r\n\t\tupdTask(command.value, oldId, newId);\r\n\t\tupdTask(command.oldValue, oldId, newId);\r\n\t}\r\n\r\n\tfunction updLink(link, oldTaskId, newTaskId){\r\n\t\tif(!link) return;\r\n\t\tif(link.source == oldTaskId){\r\n\t\t\tlink.source = newTaskId;\r\n\t\t}\r\n\t\tif(link.target == oldTaskId){\r\n\t\t\tlink.target = newTaskId;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction changeLinkCommandId(command, oldId, newId){\r\n\t\tupdLink(command.value, oldId, newId);\r\n\t\tupdLink(command.oldValue, oldId, newId);\r\n\t}\r\n\r\n\tfunction updateTasksIds(log, oldId, newId) {\r\n\t\tvar undo = gantt._undo;\r\n\r\n\t\tfor (var i = 0; i < log.length; i++) {\r\n\t\t\tvar entry = log[i];\r\n\t\t\tfor (var j = 0; j < entry.commands.length; j++) {\r\n\t\t\t\tif (entry.commands[j].entity == undo.command.entity.task) {\r\n\t\t\t\t\tchangeTaskCommandId(entry.commands[j], oldId, newId);\r\n\t\t\t\t} else if (entry.commands[j].entity == undo.command.entity.link) {\r\n\t\t\t\t\tchangeLinkCommandId(entry.commands[j], oldId, newId);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tfunction updateLinksIds(log, oldId, newId){\r\n\t\tvar undo = gantt._undo;\r\n\r\n\t\tfor (var i = 0; i < log.length; i++) {\r\n\t\t\tvar entry = log[i];\r\n\t\t\tfor (var j = 0; j < entry.commands.length; j++) {\r\n\t\t\t\tvar command = entry.commands[j];\r\n\t\t\t\tif (command.entity == undo.command.entity.link) {\r\n\t\t\t\t\tif(command.value && command.value.id == oldId){\r\n\t\t\t\t\t\tcommand.value.id = newId;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(command.oldValue && command.oldValue.id == oldId){\r\n\t\t\t\t\t\tcommand.oldValue.id = newId;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tgantt.attachEvent(\"onTaskIdChange\", function(oldId, newId){\r\n\t\tvar undo = gantt._undo;\r\n\t\tupdateTasksIds(undo._undoStack,oldId, newId);\r\n\t\tupdateTasksIds(undo._redoStack,oldId, newId);\r\n\t});\r\n\tgantt.attachEvent(\"onLinkIdChange\", function(oldId, newId){\r\n\t\tvar undo = gantt._undo;\r\n\t\tupdateLinksIds(undo._undoStack,oldId, newId);\r\n\t\tupdateLinksIds(undo._redoStack,oldId, newId);\r\n\t});\r\n\tgantt.attachEvent(\"onGanttReady\", function(){\r\n\t\tgantt._undo.updateConfigs();\r\n\t});\r\n})();\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./sources/ext/undo.js\n// module id = 36\n// module chunks = 4"],"sourceRoot":""}